// apolloServer.js
import { ApolloServer } from 'apollo-server-micro';
import { loadSchema } from '@graphql-tools/load';
import { GraphQLFileLoader } from '@graphql-tools/graphql-file-loader';

export const config = {
  api: {
    bodyParser: false,
  },
};

const apolloServer = new ApolloServer({
  schema: await loadSchema('**/*.gql', {
    loaders: [new GraphQLFileLoader()],
  }),
});

export default apolloServer.createHandler({ path: '/api/graphql' });
